/*
 * 20190312.014
 * OLED 128x32
 *
 * File: main.c
 * Processor: PIC16F1825
 * Author: wizlab.it
 */

#include "main.h"

uint8_t invert = 0x00;

/*==============================================================================
 * Main routine
 *  - Initialize system
 *  - Loop forever
 *============================================================================*/
void main(void) {
    init();

    //Init display
    OLED_Init();

    //Looooooop
    while(1) loop();
}


/*==============================================================================
 * Loop routine
 *============================================================================*/
void loop(void) {
    __delay_ms(1500);
    __delay_ms(1500);

    //Test
    const uint8_t image[] = {
        0b11111111, 0b11111111, 0b11111111, 0b11111111,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b00000111, 0b00000111, 0b10000000,
        0b00000001, 0b00000111, 0b00000111, 0b10000000,
        0b00000001, 0b00000111, 0b00000111, 0b10000000,
        0b00000001, 0b00000111, 0b00000111, 0b10000000,
        0b00000001, 0b00000111, 0b00000111, 0b10000000,
        0b00000001, 0b00000111, 0b00000111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b00000111, 0b11100000, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b11111111, 0b11111111, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b00000001, 0b00000000, 0b00000000, 0b10000000,
        0b11111111, 0b11111111, 0b11111111, 0b11111111
    };
    OLED_DrawBitmap(0x00, 0x03, 0x00, 0x7F, image, sizeof(image));
    //OLED_DrawBitmap(0x00, 0x03, 0x40, 0x7F, image, sizeof(image));
    //OLED_DrawBitmap(0x00, 0x03, 0x60, 0x7F, image, sizeof(image));

    //Invert
    OLED_InvertDisplay(invert);
    invert++;
    if(invert > 0x01) invert = 0x00;
}